import{s as t,h as n}from"./modalHelper-md1zrCQj.js";import{b as C,M as l}from"./bootstrap.esm-CU4uQQQ5.js";window.bootstrap=C;const r=document.querySelector("#btnEnviarCorreoRecuperar"),o=document.querySelector("#email_recuperacion"),c=document.querySelector("#errorEmailRecuperacion"),u=new l(document.getElementById("modalCarga"),{backdrop:"static",keyboard:!1}),s=new l(document.getElementById("modalError")),m=new l(document.getElementById("modalSuccess")),E=document.getElementById("mensajeExito"),S=document.getElementById("mensajeError");o.addEventListener("input",function(){let e=h(o.value);o.value===""?(r.disabled=!0,document.querySelector(".campoCorreoRecuperar").classList.remove("Validado"),document.querySelector(".campoCorreoRecuperar").classList.add("NoValidado"),c.innerHTML="El campo no puede quedar vacío"):o.value.length<5||!o.value.includes("@")?(document.querySelector(".campoCorreoRecuperar").classList.remove("Validado","NoValidado"),c.innerHTML="",r.disabled=!0):e?e&&(document.querySelector(".campoCorreoRecuperar").classList.remove("NoValidado"),document.querySelector(".campoCorreoRecuperar").classList.add("Validado"),c.innerHTML="",r.disabled=!1):(r.disabled=!0,document.querySelector(".campoCorreoRecuperar").classList.remove("Validado"),document.querySelector(".campoCorreoRecuperar").classList.add("NoValidado"),c.innerHTML="La contraseña no coincide con el formato requerido")});function h(e){return/^[a-zA-z0-9_.+-]+@[a-zA-z0-9-]+\.[a-zA-z0-9-.]+$/.test(e)}r.addEventListener("click",async function(e){e.preventDefault();let i=document.querySelector("#RecuperarContrasenaForm"),p=new FormData(i),y=Object.fromEntries(p.entries());const f=JSON.stringify(y);t(u),await new Promise(a=>setTimeout(a,2e3)),n(u);try{const g=await(await fetch("/get-token")).json(),d=await fetch("https://api.lexialegal.site/api/forgot-password",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${g.token}`},body:f}),w=await d.json();console.log(d),d.ok?(t(m),E.textContent="Un enlace de recuperación se ha enviado al correo electrónico proporcionado",n(m,5e3,()=>{window.location.href="https://web.lexialegal.site/login"})):(t(s),S.textContent=w.message,n(s,2500))}catch(a){console.log(a),t(s),n(s,2500)}});
