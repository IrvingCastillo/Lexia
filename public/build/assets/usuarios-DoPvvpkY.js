import{s as c,h as l}from"./modalHelper-md1zrCQj.js";import{b as g,M as d}from"./bootstrap.esm-CU4uQQQ5.js";window.bootstrap=g;const p=new d(document.getElementById("modalCarga"),{backdrop:"static",keyboard:!1}),s=new d(document.getElementById("modalError")),y=new d(document.getElementById("modalSuccess")),f=document.getElementById("mensajeExito"),b=document.getElementById("mensajeError"),w=document.querySelector("#addUser");S();const v=[{id:1,nombre:"Tiya Mcdaniel",rol:"Abogado",telefono:"9611233361",fecha:"04/06/2022",avatar:"https://media.istockphoto.com/id/1300845620/es/vector/icono-de-usuario-plano-aislado-sobre-fondo-blanco-s%C3%ADmbolo-de-usuario-ilustraci%C3%B3n-vectorial.jpg?s=612x612&w=0&k=20&c=grBa1KTwfoWBOqu1n0ewyRXQnx59bNHtHjvbsFc82gk="},{id:2,nombre:"Juan PÃ©rez",rol:"Asistente",telefono:"9610001111",fecha:"15/07/2023",avatar:"https://via.placeholder.com/48"}];async function S(){try{const t=await(await fetch("/get-token")).json(),a=await fetch("https://api.lexialegal.site/api/clients",{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${t.token}`}}),r=await a.json();a.ok&&(console.log(r),j(v))}catch{c(s),l(s,2e3)}}async function j(n){const t=document.querySelector("#usuario-template"),a=document.querySelector("#contenedor-usuarios"),r=document.querySelector("#mensaje-vacio");if(a.innerHTML="",!n||n.length===0){r.style.display="block";return}else r.style.display="none";n.forEach(o=>{const e=t.content.cloneNode(!0);e.querySelector(".avatar-usuario").src=o.avatar||"https://via.placeholder.com/48",e.querySelector(".nombre-usuario").textContent=o.nombre,e.querySelector(".rol-usuario").textContent=o.rol,e.querySelector(".telefono-usuario").textContent=o.telefono,e.querySelector(".fecha-usuario").textContent=o.fecha,e.querySelector(".btn-editar").addEventListener("click",()=>{console.log("Editar usuario:",o.id)}),e.querySelector(".btn-remover").addEventListener("click",()=>{console.log("Remover usuario:",o.id)}),a.appendChild(e)})}w.addEventListener("click",async n=>{c(p),await new Promise(t=>setTimeout(t,2e3)),l(p);try{let t=document.querySelector("#AltaUsuarios"),a=new FormData(t),r=document.querySelector("#area_code"),o=document.querySelector("#telefono");a.append("telefono",r.value+o.value);let e=Object.fromEntries(a.entries()),m=JSON.stringify(e);const h=await(await fetch("/get-token")).json();console.log(m);const u=await fetch("https://api.lexialegal.site/api/usuarios/agregar/integrantes",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${h.token}`},body:m}),i=await u.json();u.ok?(console.log(i.data),f.textContent=i.message,c(y),l(y,2e3,()=>{$("#modalNuevoCaso").modal({hide:!0})})):(b.textContent=i.message,c(s),l(s,4e3))}catch{c(s),l(s,2e3)}});
