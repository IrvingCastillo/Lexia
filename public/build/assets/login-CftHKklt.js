import{s as e,h as t}from"./modalHelper-md1zrCQj.js";import{b as u,M as n}from"./bootstrap.esm-CU4uQQQ5.js";window.bootstrap=u;const w=document.querySelector(".btnLogin"),g=document.getElementById("email"),y=document.getElementById("password"),c=new n(document.getElementById("modalCarga"),{backdrop:"static",keyboard:!1}),o=new n(document.getElementById("modalError")),d=new n(document.getElementById("modalSuccess")),l=document.getElementById("errorLogin"),h=document.getElementById("mensajeExito");w.addEventListener("click",async m=>{m.preventDefault();const s=g.value.trim(),r=y.value.trim(),p=JSON.stringify({email:s,password:r});if(e(c),await new Promise(a=>setTimeout(a,2e3)),t(c),!s||!r){e(o),l.textContent="Completa los campos para poder ingresar",t(o,2e3);return}try{const i=(await(await fetch("https://api.lexialegal.site/api/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:p})).json()).access_token;if(!i)throw new Error("Inicio de sesión fallido");if(await(await fetch("/guardar-token",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({token:i})})).json())e(d),h.textContent="¡Bienvenido!",t(d,3e3,()=>{window.location.href="https://web.lexialegal.site/casos"});else throw new Error("No se pudo iniciar sesión")}catch{e(o),l.textContent="La contraseña o correo son incorrectos",t(o,2e3)}});
